---
alwaysApply: true
---

/** Configuration des variantes du bloc score certificat */
const CERTIFICATE_SCORE_VARIANTS = {
  excellent: {
    icon: "ph:trophy-fill",
    ribbon: "Excellent",
    badge: "Félicitations ! Résultat excellent",
    badgeClassName: "cert-score-badge-excellent",
    ribbonClassName: "",
  },
  certified: {
    icon: "ph:medal-fill",
    ribbon: "Certifié",
    badge: "Parcours réussi — Certificat délivré",
    badgeClassName: "certified",
    ribbonClassName: "cert-score-ribbon-certified",
  },
};

/**
 * Bloc résumé moderne : moyenne générale + score.
 * Variantes : "excellent" (≥85 %) | "certified" (≥70 %).
 * Usage : <CertificateScoreComponent percentage={88} score={44} maxScore={50} variant="excellent" />
 */
function CertificateScoreComponent({ percentage = 0, score = 0, maxScore = 0, variant = "certified" }) {
  const config = CERTIFICATE_SCORE_VARIANTS[variant] ?? CERTIFICATE_SCORE_VARIANTS.certified;
  const isExcellent = variant === "excellent";

  return (
    <section className={`cert-score-modern cert-score-${variant}`} aria-labelledby="cert-score-heading" role="region">
      <h2 id="cert-score-heading" className="visually-hidden">
        Résultat du parcours — Moyenne {percentage} %, score {score} sur {maxScore} points
      </h2>
      <div className={`cert-score-ribbon ${config.ribbonClassName}`.trim()}>{config.ribbon}</div>
      <div className="cert-score-modern-inner">
        <div className="cert-score-modern-left">
          <span className={isExcellent ? "cert-score-hero-wrap" : "cert-score-modern-icon-wrap"} aria-hidden>
            <Icon icon={config.icon} className="cert-score-hero-icon" aria-hidden />
          </span>
          <div className="cert-score-modern-stats">
            <span className="cert-score-modern-label">Moyenne générale</span>
            <span className="cert-score-value-wrap" aria-label={`${percentage} pour cent`}>
              <span className="cert-score-value">{percentage}</span>
              <span className="cert-score-unit">%</span>
            </span>
          </div>
        </div>
        <div className="cert-score-modern-divider" aria-hidden />
        <div className="cert-score-modern-right">
          <span className="cert-score-modern-label">Score</span>
          <span className="cert-score-modern-points" aria-label={`${score} sur ${maxScore} points`}>
            {score}<span className="cert-score-modern-sep">/</span>{maxScore}
          </span>
          <span className="cert-score-modern-sublabel">points</span>
        </div>
      </div>
      <p className={`cert-score-badge ${config.badgeClassName}`} role="status">{config.badge}</p>
    </section>
  );
}
